<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Добавить пластинку - Виниловый магазин</title>
    <link rel="stylesheet" href="../styles/add_vinyl.css"/>
</head>

<body>
<header>
    <div class="logo">Виниловый Магазин</div>
    <nav>
        <ul>
            <li><a href="index.html">Главная</a></li>
            <li><a href="catalog.html">Каталог</a></li>
            <li><a href="cart.html">Корзина</a></li>
            <li><a href="care.html">Уход за винилом</a></li>
            <li>
                <a href="add_vinyl.html" class="active">Добавить пластинку</a>
            </li>
            <li><a href="about.html">О нас</a></li>
            <li class="user-icon">
                <a href="login.html">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>

<main>
    <h2>Добавить новую пластинку</h2>
    <form id="add-record-form">
        <div class="form-group">
            <label for="album-name">Название альбома:</label>
            <input
                    type="text"
                    id="album-name"
                    name="album-name"
                    placeholder="Введите название альбома"
                    required
            />
        </div>
        <div class="form-group">
            <label for="artist-name">Исполнитель:</label>
            <input
                    type="text"
                    id="artist-name"
                    name="artist-name"
                    placeholder="Введите имя исполнителя"
                    required
            />
        </div>
        <div class="form-group">
            <label for="release-year">Год выпуска (не позже 2024 года):</label>
            <input
                    type="number"
                    id="release-year"
                    name="release-year"
                    placeholder="Введите год выпуска"
                    min="1900"
                    max="2024"
                    required
            />
        </div>
        <div class="form-group">
            <label for="print-year">Год печати (не позже 2024 года):</label>
            <input
                    type="number"
                    id="print-year"
                    name="print-year"
                    placeholder="Введите год печати"
                    min="1900"
                    max="2024"
                    required
            />
        </div>
        <div class="form-group">
            <label for="genres">Жанры:</label>
            <input
                    type="text"
                    id="genres"
                    name="genres"
                    placeholder="Введите жанры через запятую"
                    required
            />
        </div>
        <div class="form-group">
            <label for="type">Тип пластинки:</label>
            <select id="type" name="type" required>
                <option value="">Выберите тип</option>
                <option value="LP">LP</option>
                <option value="EP">EP</option>
                <option value="Single">Single</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">Цена (руб.):</label>
            <input
                    type="number"
                    id="price"
                    name="price"
                    placeholder="Введите цену"
                    min="1"
                    required
            />
        </div>
        <div class="form-group">
            <label for="duration">Продолжительность (мм:сс):</label>
            <input
                    type="text"
                    id="duration"
                    name="duration"
                    placeholder="Введите продолжительность"
                    pattern="\d{1,2}:\d{2}"
                    required
            />
        </div>
        <div class="form-group">
            <label for="label">Лейбл:</label>
            <input
                    type="text"
                    id="label"
                    name="label"
                    placeholder="Введите название лейбла"
                    required
            />
        </div>
        <div class="form-group">
            <label for="image">Фото пластинки:</label>
            <input
                    type="file"
                    id="image"
                    name="image"
                    accept="image/*"
                    required
            />
        </div>
        <div class="form-group">
            <label for="description">Описание:</label>
            <textarea
                    id="description"
                    name="description"
                    placeholder="Введите описание (не менее 200 символов)"
                    minlength="200"
                    required
            ></textarea>
        </div>
        <button type="submit">Добавить пластинку</button>
    </form>

    <div class="modal" id="success-modal">
        <div class="modal-content">
            <h3>Пластинка успешно добавлена!</h3>
            <button id="close-modal">Закрыть</button>
        </div>
    </div>
</main>

<footer>
    <p>&copy; 2024 Виниловый Магазин. Все права защищены.</p>
</footer>

<script>
    document
        .getElementById("add-record-form")
        .addEventListener("submit", function (event) {
            event.preventDefault();

            const albumName = document.getElementById("album-name").value.trim();
            const artistName = document
                .getElementById("artist-name")
                .value.trim();
            const releaseYear = document.getElementById("release-year").value;
            const printYear = document.getElementById("print-year").value;
            const genres = document.getElementById("genres").value.trim();
            const type = document.getElementById("type").value;
            const price = document.getElementById("price").value;
            const duration = document.getElementById("duration").value.trim();
            const label = document.getElementById("label").value.trim();
            const image = document.getElementById("image").files[0];
            const description = document
                .getElementById("description")
                .value.trim();

            const durationPattern = /^\d{1,2}:\d{2}$/;

            if (
                !albumName ||
                !artistName ||
                !releaseYear ||
                !printYear ||
                !genres ||
                !type ||
                !price ||
                !duration ||
                !label ||
                !image ||
                !description
            ) {
                alert("Пожалуйста, заполните все поля.");
                return;
            }

            if (!durationPattern.test(duration)) {
                alert("Продолжительность должна быть в формате мм:сс.");
                return;
            }

            if (description.length < 200) {
                alert("Описание должно содержать не менее 200 символов.");
                return;
            }

            const modal = document.getElementById("success-modal");
            modal.style.display = "flex";

            document
                .getElementById("close-modal")
                .addEventListener("click", function () {
                    modal.style.display = "none";
                    document.getElementById("add-record-form").reset();
                });
        });
</script>
</body>
</html>
