<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="На сайте нашего магазина вы найдете широкий ассортимент виниловых пластинок от классики до современных альбомов.">
    <meta name="keywords" content="виниловые пластинки, купить винил, редкие издания, музыка, джаз, рок, коллекция винила">
    <meta name="author" content="Виниловый Магазин">
    <title>Виниловый Магазин - Купить виниловые пластинки онлайн</title>
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="../styles/index.css">
</head>
<body>

<main>
    <div class="intro">
        <h1>Купить виниловые пластинки в "Виниловом Магазине"</h1>
        <p>
            На сайте нашего магазина вы найдете информацию о широком ассортименте
            виниловых пластинок – от классики до современных альбомов. Мы
            предлагаем качественные издания, которые прошли строгую проверку,
            быструю доставку по всей стране и регулярное пополнение редкими
            коллекциями. Познакомьтесь с новинками, прочитайте последние новости
            музыкального мира и окунитесь в атмосферу теплого звучания винила. Мы
            здесь, чтобы помочь вам дополнить вашу коллекцию и вновь ощутить магию
            прослушивания любимой музыки.
        </p>
    </div>
    <div class="features">
        <h2>Почему выбирают Виниловый магазин?</h2>
        <div class="feature-cards">
            <div class="feature-card">
                <h3>Широкий выбор виниловых пластинок</h3>
                <p>
                    Более 1000 виниловых пластинок в нашем каталоге, включая
                    классические и современные альбомы, редкие экземпляры и уникальные
                    издания. Мы гордимся тем, что можем предложить как известные
                    записи, так и менее распространенные альбомы. Наш ассортимент
                    идеально подходит для любителей музыки всех жанров. Каталог
                    регулярно обновляется, чтобы вы всегда находили что-то новое и
                    интересное.
                </p>
            </div>
            <div class="feature-card">
                <h3>Гарантированное качество виниловых пластинок</h3>
                <p>
                    Каждая пластинка является оригинальной, её качество строго
                    проверяется нашими специалистами перед продажей. Мы понимаем
                    важность получения музыкальных изданий без повреждений и с
                    безупречным звучанием. Наши эксперты проводят тщательную проверку
                    состояния пластинок и обеспечивают их сохранность, чтобы вы могли
                    наслаждаться чистым и глубоким звуком.
                </p>
            </div>
            <div class="feature-card">
                <h3>Быстрая доставка винила по России и СНГ</h3>
                <p>
                    Получите ваш заказ в кратчайшие сроки по России и ближнему
                    зарубежью. Мы сотрудничаем с надежными курьерскими службами, чтобы
                    гарантировать быструю и безопасную доставку. Благодаря удобным
                    условиям возврата и обмена, вы сможете без проблем вернуть товар.
                    Мы ценим ваше время и стремимся сделать процесс покупки
                    максимально комфортным.
                </p>
            </div>
        </div>
    </div>

    <div class="new-arrivals">
        <h2>Новые поступления виниловых пластинок</h2>
        <div class="catalog-scroll">
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/joydivisionUnknownPleasures.jpg"
                            alt="Обложка Joy Division - Unknown Pleasures"
                    />
                </div>
                <h3>Joy Division - Unknown Pleasures (1979)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/cureSongsOfTheLostWorld.webp"
                            alt="Обложка The Cure - Songs of the Lost World"
                    />
                </div>
                <h3>The Cure - Songs of the Lost World (2024)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/IggyPop-TheIdiot-1LP-Vinyl.webp"
                            alt="Обложка Iggy Pop - The Idiot"
                    />
                </div>
                <h3>Iggy Pop - The Idiot (1977)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/MilesDavisEnigma.webp"
                            alt="Обложка Miles Davis - Enigma"
                    />
                </div>
                <h3>Miles Davis - Enigma (1955)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/PrimusAnimals_1LP_ProductShot_BLACK.webp"
                            alt="Обложка Primus - Animals Should Not Try to Act Like People"
                    />
                </div>
                <h3>Primus - Animals Should Not Try to Act Like People (2003)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
            <div class="record-card">
                <div class="img-container">
                    <img
                            src="../images/creamLive.webp"
                            alt="Обложка Cream - Live At the Forum"
                    />
                </div>
                <h3>Cream - The Goodbye Tour - Live At The Forum (1968)</h3>
                <a href="vinyl1.html">Подробнее о пластинке</a>
            </div>
        </div>
    </div>

    <div class="news">
        <h2>Новинки Винилового магазина</h2>
        <ul class="news-list">
            <li>
                <a href="vinyl1.html"
                >Ожидается поступление новых пластинок группы Аукцыон</a
                >
            </li>
            <li>
                <a href="vinyl1.html"
                >Специальное издание альбома Joy Division доступно для
                    предзаказа</a
                >
            </li>
            <li>
                <a href="vinyl1.html"
                >Новая коллекция классического джаза уже в продаже</a
                >
            </li>
            <li>
                <a href="vinyl1.html"
                >Обновление каталога: редкие пластинки 80-х годов</a
                >
            </li>
            <li>
                <a href="vinyl1.html">Скидки на альбомы The Cure до конца месяца</a>
            </li>
        </ul>
    </div>
</main>

<script>
    async function loadTemplates() {
        try {
            const [header, footer, modal] = await Promise.all([
                fetch('templates/header.html').then(r => r.text()),
                fetch('templates/footer.html').then(r => r.text()),
                fetch('templates/modal-profile.html').then(r => r.text())
            ]);

            document.body.insertAdjacentHTML('afterbegin', header);
            document.body.insertAdjacentHTML('beforeend', footer);
            document.body.insertAdjacentHTML('beforeend', modal);
        } catch (error) {
            console.error('Ошибка загрузки шаблонов:', error);
        }
    }

    function initEventHandlers() {
        document.addEventListener('click', async (e) => {
            if (e.target.closest('#user-icon-link')) {
                e.preventDefault();
                try {
                    const response = await fetch("/api/auth/me", {credentials: "include"});
                    response.ok ? document.getElementById('profile-modal').style.display = 'block' : window.location.href = 'login.html';
                } catch {
                    window.location.href = 'login.html';
                }
            }
        });

        document.getElementById('logout-btn')?.addEventListener('click', () => {
            fetch("/api/auth/logout", {method: "POST", credentials: "include"})
                .finally(() => window.location.href = 'index.html');
        });

        document.addEventListener('click', (e) => {
            const modal = document.getElementById('profile-modal');
            if (e.target === modal || e.target.closest('#cancel-btn')) modal.style.display = 'none';
        });

        document.getElementById('logout-btn')?.addEventListener('click', () => {
            fetch("/api/auth/logout", {
                method: "POST",
                credentials: "include"
            }).then(() => {
                window.location.href = 'index.html';
            });
        });
        
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('profile-modal');
            if (e.target === modal || e.target.closest('#cancel-btn')) {
                modal.style.display = 'none';
            }
        });
    }


    function setActiveNavItem() {
        const currentPage = window.location.pathname.split('/').pop();
        document.querySelectorAll('nav a').forEach(link => {
            if (link.getAttribute('href') === currentPage) {
                link.classList.add('active');
            }
        });
    }
    window.addEventListener('DOMContentLoaded', async () => {
        await loadTemplates();
        setActiveNavItem();
        initEventHandlers();
    });
</script>

</body>
</html>